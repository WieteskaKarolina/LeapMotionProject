


function initMap() {
    const map = L.map('map', {
        maxBounds: [
          [51.756338, 19.464765], // Southwest coordinates (south, west)
          [51.743076, 19.447256], // Southwest coordinates (south, west)
        ],
        minZoom: 15.4, // Set the minimum zoom level
      }).setView([51.749229, 19.453483], 15);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; OpenStreetMap contributors',
      }).addTo(map);


    var popup = L.popup();

    function onMapClick(e) {

        console.log("[",e.latlng["lat"],",",e.latlng["lng"],"]")
    }

    map.on('click', onMapClick);

    var marker = L.marker([51.752511, 19.452952]).addTo(map);
    var alchemium_politechniki_lodzkiej = L.polygon([
      [ 51.754684920607694 , 19.449234008789066 ],
      [ 51.75473143692068 , 19.449770450592045 ],
       [ 51.754678275416225 , 19.449781179428104 ],
       [ 51.75468824320307 , 19.449952840805057 ],
      [ 51.75442908003003 , 19.450027942657474 ],
         [ 51.75441246695538 , 19.449834823608402 ],
       [ 51.75436262769482 , 19.44984555244446 ],
       [ 51.7543725955513 , 19.44986164569855 ],
       [ 51.75436262769482 , 19.44985628128052 ],
       [ 51.75432275624672 , 19.44937884807587 ],
      [ 51.75435598245589 , 19.449368119239807 ],
       [ 51.75435265983609 , 19.449298381805423 ]
    ]).addTo(map)
    var biblioteka_chemiczna = L.polygon([
      [ 51.75411994183136 , 19.450280070304874 ],
 [ 51.75415316818977 , 19.450263977050785 ],
 [ 51.75416313609251 , 19.45036053657532 ],
 [ 51.754136555013616 , 19.45037126541138 ],
 [ 51.754186394523686 , 19.450934529304504 ],
 [ 51.75409003808793 , 19.450950622558597 ],
 [ 51.75402358525383 , 19.450263977050785 ],
 [ 51.75411994183136 , 19.450242519378662 ],
 [ 51.75411994183136 , 19.450280070304874 ],
    ]).addTo(map)
    var fabryka_inzynierow_XXI_wieku = L.polygon([
      [ 51.75401012716228 , 19.451835751533512 ],
 [ 51.75438226188474 , 19.451755285263065 ],
 [ 51.75438226188474 , 19.451792836189274 ],
 [ 51.7544188106653 , 19.451782107353214 ],
 [ 51.75440884281901 , 19.45164799690247 ],
 [ 51.75439555235384 , 19.45164799690247 ],
 [ 51.754388907119775 , 19.451503157615665 ],
 [ 51.75440219758691 , 19.451503157615665 ],
 [ 51.75438226188474 , 19.451326131820682 ],
 [ 51.7544188106653 , 19.451320767402652 ],
 [ 51.75442213328027 , 19.451336860656742 ],
 [ 51.75445535941634 , 19.451336860656742 ],
 [ 51.75445203680381 , 19.451245665550235 ],
 [ 51.75444539157807 , 19.451245665550235 ],
 [ 51.75444539157807 , 19.451229572296146 ],
 [ 51.75456168288741 , 19.451208114624027 ],
 [ 51.75456168288741 , 19.451229572296146 ],
 [ 51.75479426460776 , 19.451181292533878 ],
 [ 51.754810877541956 , 19.451310038566593 ],
 [ 51.75480755495558 , 19.451310038566593 ],
 [ 51.75480423236898 , 19.45136368274689 ],
 [ 51.75481752271391 , 19.45136368274689 ],
 [ 51.75482084529952 , 19.451379776000977 ],
 [ 51.75482749047002 , 19.451433420181278 ],
 [ 51.75480755495558 , 19.451444149017338 ],
 [ 51.75482749047002 , 19.451631903648376 ],
 [ 51.754844103392 , 19.451631903648376 ],
 [ 51.754870684054424 , 19.451964497566227 ],
 [ 51.754036708315574 , 19.452157616615295 ],
 [ 51.75400680451703 , 19.451835751533512 ]
    ]).addTo(map)
    var audytorium_im_Soltana = L.polygon([[ 51.754005938620665 , 19.451857620606464 ],
       [ 51.754039165062906 , 19.452147299180073 ],
       [ 51.753650414158365 , 19.452254587540665 ],
       [ 51.7536238327777 , 19.45193272245888 ],
       [ 51.753892968534124 , 19.451868349442524 ],
       [ 51.753892968534124 , 19.451879078278584 ]]).addTo(map)

    var temp = L.polygon([[ 51.75314685655717 , 19.451524615287784 ],
       [ 51.752881039082766 , 19.45158898830414 ],
       [ 51.7528876845387 , 19.451766014099125 ],
       [ 51.75316014738982 , 19.451712369918827 ]]).addTo(map)

    var temp2 = L.polygon([[ 51.752615381978075 , 19.45116519927979 ],
       [ 51.752558895230955 , 19.45117056369782 ],
       [ 51.75258547723839 , 19.451433420181278 ],
       [ 51.7526319957138 , 19.451428055763248 ]]).addTo(map)
    var temp3 = L.polygon([[ 51.75518855514744 , 19.450860619581366 ],
       [ 51.75500581406354 , 19.450903534925605 ],
       [ 51.75510549111008 , 19.452067613638068 ],
       [ 51.755294876892364 , 19.452030062711856 ]]).addTo(map)
    var wydzial_biotechnologii_i_nauk_o_zywnosci = L.polygon([
      [ 51.75498026770147 , 19.45265114307404 ],
      [ 51.75393032218699 , 19.452860355377197 ],
      [ 51.75394693543898 , 19.45309638977051 ],
      [ 51.75499688056725 , 19.45288717746735 ]
    ]).addTo(map)
    var wydzial_biotechnologii_i_nauk_o_zywnosci_2 = L.polygon([[ 51.75475815552406 , 19.45293784132446 ],
      [ 51.75480467176157 , 19.453506469635617 ],
      [ 51.75490767183129 , 19.453474283127438 ],
      [ 51.754950865339 , 19.454005360512387 ],
      [ 51.75467509069502 , 19.454075097946774 ],
      [ 51.75464850991746 , 19.45369958868469 ],
      [ 51.75469834886256 , 19.45369958868469 ],
     [ 51.75464850991746 , 19.45296466341461 ]]).addTo(map)
     var wydzial_biotechnologii_i_nauk_o_zywnosci_3 = L.polygon([[ 51.75464149046949 , 19.453702569007877 ],
       [ 51.754585006256484 , 19.453707933425907 ],
       [ 51.754585006256484 , 19.453686475753788 ],
       [ 51.75437235917375 , 19.453734755516052 ],
       [ 51.75437235917375 , 19.453750848770145 ],
       [ 51.754319197246645 , 19.453766942024235 ],
       [ 51.75433581035559 , 19.453954696655277 ],
       [ 51.75440226273027 , 19.453949332237247 ],
       [ 51.754412230578026 , 19.454019069671634 ],
       [ 51.75448532806112 , 19.454008340835575 ],
       [ 51.754528521972794 , 19.454544782638553 ],
       [ 51.75444213410813 , 19.454555511474613 ],
       [ 51.754452101947116 , 19.45464134216309 ],
       [ 51.75432916511275 , 19.454673528671268 ],
       [ 51.754352423458435 , 19.454984664916996 ],
       [ 51.75441887580868 , 19.454973936080936 ],
       [ 51.754412230578026 , 19.454823732376102 ],
       [ 51.75472787795278 , 19.454748630523685 ],
       [ 51.75471791017469 , 19.45459306240082 ],
       [ 51.75464481306807 , 19.454609155654907 ],
       [ 51.754585006256484 , 19.453927874565128 ],
       [ 51.75466807125119 , 19.453901052474976 ]]).addTo(map)
       
       var wydzial_inzynierii_procesowej_i_ochrony_srodowiska = L.polygon([
       
         [ 51.75420988746006 , 19.453310966491703 ],
         [ 51.75424975900777 , 19.453702569007877 ],
         [ 51.754219855350286 , 19.453702569007877 ],
         [ 51.75420988746006 , 19.453675746917728 ],
         [ 51.75410356316072 , 19.453707933425907 ],
         [ 51.75410356316072 , 19.453729391098022 ],
         [ 51.754120176349005 , 19.453729391098022 ],
         [ 51.754120176349005 , 19.453750848770145 ],
         [ 51.754110208436764 , 19.453756213188175 ],
         [ 51.754120176349005 , 19.45387959480286 ],
         [ 51.75425972688922 , 19.45384740829468 ],
         [ 51.75428298527065 , 19.454051256179813 ],
         [ 51.75419659693634 , 19.45408880710602 ],
         [ 51.75419659693634 , 19.454169273376465 ],
         [ 51.75411685371182 , 19.454185366630558 ],
         [ 51.754110208436764 , 19.45409953594208 ],
         [ 51.75396068948932 , 19.45414245128632 ],
         [ 51.75393743094188 , 19.4539225101471 ],
         [ 51.7540902726057 , 19.45387959480286 ],
         [ 51.75407033676583 , 19.453707933425907 ],
         [ 51.75392081768638 , 19.453750848770145 ],
         [ 51.75388426850276 , 19.453386068344116 ]
        ]).addTo(map)
        var sekcja_rekrutacji_pl = L.polygon([[ 51.752474335541976 , 19.453743338781354 ],
           [ 51.752490949329555 , 19.453737974363325 ],
           [ 51.75250424035522 , 19.453850627141946 ],
           [ 51.75239126651234 , 19.45388817806816 ],
           [ 51.75238129821849 , 19.453861355978006 ],
           [ 51.75235803885767 , 19.45383453388786 ],
           [ 51.75234142502122 , 19.453727245527265 ],
           [ 51.75235139332383 , 19.453727245527265 ],
           [ 51.75235139332383 , 19.453689694601056 ],
           [ 51.75244110794846 , 19.453662872510908 ],
           [ 51.75245772174827 , 19.453646779256818 ],
           [ 51.75246436726647 , 19.453662872510908 ],
           [ 51.752474335541976 , 19.453684330183023 ],
           [ 51.75246436726647 , 19.453705787855146 ]]).addTo(map)
        var budynek_pasywny = L.polygon([[ 51.75292783644874 , 19.454952478408813 ],
           [ 51.75294112734586 , 19.455032944679264 ],
           [ 51.75296106368419 , 19.455022215843204 ],
           [ 51.75296770912832 , 19.45511341094971 ],
           [ 51.752944450069506 , 19.455129504203796 ],
           [ 51.75296106368419 , 19.455274343490604 ],
           [ 51.75285805917477 , 19.455290436744693 ],
           [ 51.75282815459577 , 19.454979300498966 ]]).addTo(map)

        var wydzial_chemiczny_instytut_technologii_polimerow_i_barwnikow = L.polygon([
          [ 51.753608893102886 , 19.45309102535248 ],
          [ 51.75332646487375 , 19.45314466953278 ],
          [ 51.75337630527783 , 19.453756213188175 ],
          [ 51.75365873319528 , 19.453691840171818 ]
        ]).addTo(map)

        var wydzial_chemiczny_instytut_technologii_polimerow_i_barwnikow_16a = L.polygon([
          [ 51.7535386329497 , 19.452978372573856 ],
 [ 51.75352534222843 , 19.452753067016605 ],
 [ 51.753193072925534 , 19.452812075614933 ],
 [ 51.7532196545597 , 19.453058838844303 ],
 [ 51.753392434800595 , 19.453010559082035 ],
 [ 51.753405725561 , 19.45312857627869 ],
 [ 51.75362502254259 , 19.453074932098392 ],
 [ 51.753631667889046 , 19.452951550483704 ],
 [ 51.75358515044333 , 19.452967643737797 ],
 [ 51.75359179579566 , 19.453010559082035 ],
 [ 51.75355856902424 , 19.453010559082035 ],
 [ 51.7535386329497 , 19.452978372573856 ]
        ]).addTo(map)

        var a10 = L.polygon([[ 51.75302397759252 , 19.453750848770145 ],
           [ 51.75295087774411 , 19.45287644863129 ],
           [ 51.752538858204026 , 19.452956914901737 ],
           [ 51.75261860421482 , 19.45384204387665 ]]).addTo(map)

        var a11 = L.polygon([[ 51.753027352426344 , 19.453750848770145 ],
          [ 51.75315361551274 , 19.453707933425907 ],
          [ 51.75315693822078 , 19.453729391098022 ],
          [ 51.753150292804456 , 19.453729391098022 ],
          [ 51.753150292804456 , 19.453783035278324 ],
          [ 51.75315693822078 , 19.453783035278324 ],
          [ 51.753166906343395 , 19.45389032363892 ],
          [ 51.75319681069807 , 19.45389032363892 ],
          [ 51.753216746923556 , 19.454051256179813 ],
          [ 51.75332971870159 , 19.454013705253605 ],
          [ 51.753326396006265 , 19.453954696655277 ],
          [ 51.75334300948042 , 19.453943967819217 ],
          [ 51.7532998144349 , 19.453461170196537 ],
          [ 51.75301073883609 , 19.453514814376835 ]]).addTo(map)
          var a12_a = L.polygon([[ 51.753336395733314 , 19.454008340835575 ],
           [ 51.75336629997579 , 19.454464316368107 ],
           [ 51.75380157059668 , 19.4543731212616 ],
           [ 51.753765021316546 , 19.4539225101471 ]]).addTo(map)

           var a12_b = L.polygon([[ 51.75333991572391 , 19.454019069671634 ],
             [ 51.75336649727167 , 19.454458951950077 ],
             [ 51.75309735837782 , 19.454534053802494 ],
             [ 51.75311729464719 , 19.454791545867923 ],
             [ 51.753000999618536 , 19.454818367958072 ],
             [ 51.75298438601856 , 19.45464134216309 ],
             [ 51.752868090647645 , 19.454684257507328 ],
             [ 51.75288138156235 , 19.45484519004822 ],
             [ 51.75284150880654 , 19.45485591888428 ],
             [ 51.75281824968274 , 19.454684257507328 ],
             [ 51.75277505413533 , 19.454700350761417 ],
             [ 51.75274847223943 , 19.454469680786136 ],
             [ 51.75280163601554 , 19.454458951950077 ],
             [ 51.75278502234223 , 19.454281926155094 ],
             [ 51.75272521306772 , 19.454292654991153 ],
             [ 51.75270859936633 , 19.45407807826996 ],
             [ 51.752768408662796 , 19.454061985015873 ],
             [ 51.752745149501365 , 19.453809857368473 ],
             [ 51.75278834507738 , 19.453804492950443 ],
             [ 51.752808281483155 , 19.454040527343754 ],
             [ 51.75292125428292 , 19.454024434089664 ],
             [ 51.752901317927034 , 19.453772306442264 ],
             [ 51.75301761321238 , 19.453740119934086 ],
             [ 51.75305416309737 , 19.45408880710602 ]]).addTo(map)

      var centrum_komputerowe_lodman = L.polygon([[ 51.75433681233604 , 19.454767704264672 ],
         [ 51.75435674805828 , 19.454987645403893 ],
         [ 51.7541640357081 , 19.4550251963301 ],
         [ 51.7541407772654 , 19.454783797518758 ],
         [ 51.75417732624142 , 19.454767704264672 ],
         [ 51.75419061677081 , 19.454799890772847 ],
         [ 51.75419726203403 , 19.454810619608907 ],
         [ 51.754203907296315 , 19.45481598402694 ]]).addTo(map)
    var wipos_lab_factory = L.polygon([[ 51.75531988188624 , 19.452323317673294 ],
       [ 51.75535975245398 , 19.452886581566418 ],
       [ 51.75517701206282 , 19.45292413249263 ],
       [ 51.755170366943744 , 19.452875852730358 ],
       [ 51.75503746435707 , 19.452897310402477 ],
       [ 51.755000916077165 , 19.452457428124035 ],
       [ 51.755050754633324 , 19.452435970451916 ],
       [ 51.75504410949569 , 19.45235013976344 ],
       [ 51.75524014064519 , 19.452296495583145 ],
       [ 51.75525010830802 , 19.45233941092738 ],
     
 
       [ 51.75530659168917 , 19.452323317673294 ]]).addTo(map)

    var kwestura_dzial_osobowy = L.polygon([[ 51.75513626088959 , 19.45038199424744 ],
      [ 51.754989561560436 , 19.450419545173645 ],
       [ 51.75499339048523 , 19.450526833534244 ],
       [ 51.755003358202536 , 19.450526833534244 ],
       [ 51.75501332591763 , 19.450596570968628 ],
       [ 51.755003358202536 , 19.45062339305878 ],
       [ 51.755003358202536 , 19.45065021514893 ],
       [ 51.75501664848886 , 19.450677037239075 ],
       [ 51.755036583910965 , 19.45089161396027 ],
       [ 51.75519274441316 , 19.450848698616028 ]]).addTo(map)

    var _1_15 = L.polygon([[ 51.75455845520561 , 19.45066094398499 ],
      [ 51.75437238895362 , 19.450698494911197 ],
      [ 51.754398969893714 , 19.451041817665104 ],
      [ 51.754565100414716 , 19.451009631156925 ],
      [ 51.75455180999552 , 19.450848698616028 ],
      [ 51.754568423018895 , 19.450848698616028 ]]).addTo(map)

    var wydzial_chemiczny = L.polygon([[ 51.7538543590195 , 19.450076222419742 ],
      [ 51.75368822588393 , 19.45011377334595 ],
      [ 51.7537546792115 , 19.450843334198 ],
      [ 51.75373142055798 , 19.450843334198 ],
      [ 51.7537546792115 , 19.4510954618454 ],
      [ 51.753767969865265 , 19.4510954618454 ],
      [ 51.75383442307551 , 19.451782107353214 ],
      [ 51.753993910381084 , 19.451739192008976 ],
      [ 51.75393410270748 , 19.451074004173282 ],
      [ 51.75400387831899 , 19.451057910919193 ],
      [ 51.75397729714636 , 19.45076286792755 ],
      [ 51.75391748945078 , 19.450784325599674 ]]).addTo(map);

    var kancelaria_i_zwiazki_zawodowe = L.polygon([
      [ 51.75366354744785 , 19.451191264133744 ],
      
      [ 51.75356731934544 , 19.451218086223893 ],
      [ 51.75351848468089 , 19.450719952583317 ],
      [ 51.75361709252746 , 19.450697737675004 ]
    ]).addTo(map);
    var mechaniczny_v1 = L.polygon([
        [51.752375, 19.451704],
        [51.752844, 19.451589],
        [51.752928, 19.45245],
        [51.75245, 19.45256]
    ]).addTo(map);

    var mechaniczny_v2 = L.polygon([
        [51.753177, 19.451519],
        [51.753513, 19.451439],
        [51.753594, 19.452292],
        [51.753259, 19.45237]
    ]).addTo(map);

    mechaniczny_v1.setStyle({
        fillColor: 'blue',
        color: 'blue',
        weight: 3,
      });

    mechaniczny_v2.setStyle({
        fillColor: 'blue',
        color: 'blue',
        weight: 3,
      });

    //
    // mechaniczny_v1.bindPopup("WYDZIAŁ MECHANICZNY\nBUDYNEK A22\nBUDYNEK A22\nBUDYNEK A22\nBUDYNEK A22\nBUDYNEK A22\nBUDYNEK A22\nBUDYNEK A22");
    //to jest Json w ktorym sa dane na temat budynkow
    let bulidingsData = '{"buildings":[' +
        '{"name":"Mechaniczny","addres":"Stefanowskiego 18","code":"A10","imgSrc":"images/A10img.jpg","QRSrc":"images/A10QR.png" },' +
        '{"name":"Mechaniczny2","addres":"Mechaniczny addres234567" },' +
        '{"name":"Mechaniczny3","addres":"Mechaniczny addres" }]}';
//to jest funkcja ktora przypisuje funkcej tworzaca okienko z informacjamido danego budynku
    //na podstawie przekazanej nazwy zasysa dane z JSONA bulidingsData
    //
    function addBuilindEvent(name) {
        var elemDiv = document.createElement('div');
        elemDiv.id="floating-info-box"

        var blur = document.createElement('div');
        blur.id="blur"
        // blur.style.height=screen.height+"px"

        var closeBtn = document.createElement('button');
        closeBtn.id="close-floating-info-box"
        // closeBtn.append("X")
        closeBtn.addEventListener("click",() => {
            document.getElementById("floating-info-box").remove()
            document.getElementById("blur").remove()
        },"false")

        blur.addEventListener("click",() => {
            document.getElementById("floating-info-box").remove()
            document.getElementById("blur").remove()
        },"false")

        elemDiv.append(closeBtn)

        const obj = JSON.parse(bulidingsData);


        var infoCode = document.createElement('span');
        infoCode.classList.add("info-box")
        infoCode.append("KOD BUDYNKU: "+obj.buildings.filter(function(item) { return item.code === name; })[0]['code'])
        elemDiv.append(infoCode)

        var info1 = document.createElement('span');
        info1.classList.add("info-box")
        info1.append("NAZWA: "+obj.buildings.filter(function(item) { return item.code === name; })[0]['name'])
        elemDiv.append(info1)

        var found = obj.buildings.filter(function(item) { return item.code === name; })[0]['addres']

        var info2 = document.createElement('span');
        info2.classList.add("info-box")
        info2.append("ADRES: "+found)
        elemDiv.append(info2)

        var qr = document.createElement("img");
        qr.src = obj.buildings.filter(function(item) { return item.code === name; })[0]['QRSrc']
        qr.id="qrImage"
        elemDiv.append(qr)

        var image = document.createElement("img");
        image.src = obj.buildings.filter(function(item) { return item.code === name; })[0]['imgSrc']
        image.id="bdImage"
        elemDiv.append(image)




        document.body.appendChild(elemDiv);
        document.body.appendChild(blur);



    }

    //przypisanie do danego budynku funkcji od okienka jako argument kod budynku :))
    //WAZNE nazwa w argumencie musi znajdowac sie w jsonie inaczej kraksa
    mechaniczny_v1.addEventListener("click",()=>addBuilindEvent("A10"),false)

      // mechaniczny_v2.bindPopup("WYDZIAŁ MECHANICZNY\nBUDYNEK A20");

    var chemiczny_v1 = L.polygon([
        [51.752476, 19.450693],
        [51.7523, 19.450731],
        [51.752244, 19.450001],
        [51.75241, 19.449947],
        [51.752416, 19.449964],
        [51.753187, 19.449797],
        [51.753193, 19.449781],
        [51.75336, 19.449749],
        [51.753423, 19.450495],
        [51.75325, 19.450527],
        [51.75321, 19.450049],
        [51.753157, 19.450071],
        [51.753163, 19.450098],
        [51.752489, 19.450243],
        [51.752489, 19.450205],
        [51.752439, 19.450221]
    ]).addTo(map);

    chemiczny_v1.setStyle({
        fillColor: 'red',
        color: 'red',
        weight: 3,
      });

    // chemiczny_v1.bindPopup("WYDZIAŁ CHEMICZNY\nBUDYNEK A33");

  }


  document.addEventListener('DOMContentLoaded', initMap);

